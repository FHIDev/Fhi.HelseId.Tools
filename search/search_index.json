{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Fhi.HelseId.Tools","text":"<p>Developer and operations tools to work with HelseID clients and registrations for FHI</p>"},{"location":"#client-secret-tool","title":"Client secret tool","text":"<p>Client secret tool</p> <p></p>"},{"location":"ClientSecret/client-secret-update-commands/","title":"Update client with new keys Commands","text":"<ol> <li>User Request: A user initiates a request to upgrade/rotate the client secret for an application through the tools console interface.</li> <li>Authentication: The Client Secret Tool authenticates with Helse ID using the old secret and client ID to verify its identity to get an access token.</li> <li>Secret Update Process: The tool updates the client configuration throuhg the Helse ID Selvbetjening API passing the access token. The updated secret is then stored in the Client Configuration inside Helse ID.</li> </ol>"},{"location":"ClientSecret/client-secret-update-commands/#parameters","title":"Parameters","text":"Parameter name Descrition Sample ClientId The Client to updates unique Identifier found in Klient konfigurasjon in HelseId Selvbetjening <code>37a08838-db82-4de0-bfe1-bed876e7086e</code> NewPublicJwkPath Path to the new public key. <code>C:\\keys\\37a08838-db82-4de0-bfe1-bed876e7086e_public.json</code> NewPublicJwk public key string <code>{\\\"alg\\\":\\\"PS512\\\",\\\"d\\\":\\\"xxx .....}</code> ExistingPrivateJwkPath Path to the new private key <code>C:\\keys\\37a08838-db82-4de0-bfe1-bed876e7086e_private.json</code> ExistingPrivateJwk private key string <code>{\\\"alg\\\":\\\"PS512\\\",\\\"d\\\":\\\"xxx .....}</code>"},{"location":"ClientSecret/client-secret-update-commands/#commands","title":"Commands","text":"<pre><code> updateclientkey --ClientId &lt;CLIENT_ID&gt; --NewPublicJwk &lt;NEW_KEY&gt;  --ExistingPrivateJwk &lt;OLD_KEY&gt;\n</code></pre> <pre><code> updateclientkey --ClientId &lt;CLIENT_ID&gt; --NewPublicJwkPath &lt;PATH&gt; --ExistingPrivateJwkPath &lt;PATH&gt;\n</code></pre>"},{"location":"ClientSecret/generatekey-command/","title":"Generate new keys Commands","text":""},{"location":"ClientSecret/generatekey-command/#parameters","title":"Parameters","text":"Parameter name Descrition Sample KeyFileNamePrefix Prefix of name of the public and private key file. The keys will be named <code>&lt;FileName&gt;_private.json</code> and <code>&lt;FileName&gt;_public.json</code> KeyDirectory Path to where private and public key will be stored"},{"location":"ClientSecret/generatekey-command/#commands","title":"Commands","text":"<pre><code> generatekey --KeyFileNamePrefix &lt;NAME&gt; --KeyDirectory &lt;PATH&gt;\n</code></pre>"},{"location":"ClientSecret/overview/","title":"Tool for update HelseId Client secrets (Jwk)","text":"<p>Client Secret Tool is a console application that facilitates the secure rotation of client secrets for applications integrated with Helse ID. A user initiates a request to upgrade/rotate the client secret for an application through the tools console interface. The tool provides commands for:</p> <ul> <li>Generateion of new keys Command for generate new private and public Json Web Keys (jwk). See overview of key generation commands</li> <li>Update client keys in HelseID client configuration: Command for update secrets (public key) on a HelseID client. See overview of update client secret commands</li> </ul> <p>The image below illustrates the steps for updating a client keys (secrets)</p> <p></p> <ol> <li>Update Klientkonfiguration scope: In order for an application to use the tool the Client must have registered nhn:selvbetjening/client scope. The scope nhn:selvbetjening/client to klientsystem must be added to the client system and  klientkonfigurasjon </li> <li>Generate new keys: The tool generate two new json web keys (jwk), private and public, with the command <code>generatekey</code> . The public key is used by HelseID to validate the client assertion. The private key is used by the application to generate a client assertion token.</li> <li>Update client with publik key: After new keys are generated HelseId should be updated with the new public key with the command <code>updateclientkey</code>. </li> <li>Update application with private key: The application configuration must be updated with the new private key.</li> </ol>"}]}